function e(){}function t(e){return e()}function n(){return Object.create(null)}function s(e){e.forEach(t)}function l(e){return"function"==typeof e}function i(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function o(t,n,s){t.$$.on_destroy.push(function(t,...n){if(null==t)return e;const s=t.subscribe(...n);return s.unsubscribe?()=>s.unsubscribe():s}(n,s))}function c(e,t){e.appendChild(t)}function a(e,t,n){e.insertBefore(t,n||null)}function r(e){e.parentNode.removeChild(e)}function u(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function d(e){return document.createElement(e)}function f(e){return document.createTextNode(e)}function p(){return f(" ")}function h(){return f("")}function m(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function g(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function v(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function $(e,t){e.value=null==t?"":t}function x(e,t){for(let n=0;n<e.options.length;n+=1){const s=e.options[n];if(s.__value===t)return void(s.selected=!0)}}function b(e,t,n){e.classList[n?"add":"remove"](t)}let y;function w(e){y=e}function k(){if(!y)throw new Error("Function called outside component initialization");return y}function _(e){k().$$.on_mount.push(e)}function T(){const e=k();return(t,n)=>{const s=e.$$.callbacks[t];if(s){const l=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);s.slice().forEach((t=>{t.call(e,l)}))}}}const z=[],F=[],S=[],P=[],C=Promise.resolve();let E=!1;function L(e){S.push(e)}function A(e){P.push(e)}let N=!1;const U=new Set;function O(){if(!N){N=!0;do{for(let e=0;e<z.length;e+=1){const t=z[e];w(t),q(t.$$)}for(w(null),z.length=0;F.length;)F.pop()();for(let e=0;e<S.length;e+=1){const t=S[e];U.has(t)||(U.add(t),t())}S.length=0}while(z.length);for(;P.length;)P.pop()();E=!1,N=!1,U.clear()}}function q(e){if(null!==e.fragment){e.update(),s(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(L)}}const R=new Set;let j;function M(){j={r:0,c:[],p:j}}function K(){j.r||s(j.c),j=j.p}function H(e,t){e&&e.i&&(R.delete(e),e.i(t))}function I(e,t,n,s){if(e&&e.o){if(R.has(e))return;R.add(e),j.c.push((()=>{R.delete(e),s&&(n&&e.d(1),s())})),e.o(t)}}function D(e,t){const n=t.token={};function s(e,s,l,i){if(t.token!==n)return;t.resolved=i;let o=t.ctx;void 0!==l&&(o=o.slice(),o[l]=i);const c=e&&(t.current=e)(o);let a=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==s&&e&&(M(),I(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),K())})):t.block.d(1),c.c(),H(c,1),c.m(t.mount(),t.anchor),a=!0),t.block=c,t.blocks&&(t.blocks[s]=c),a&&O()}if((l=e)&&"object"==typeof l&&"function"==typeof l.then){const n=k();if(e.then((e=>{w(n),s(t.then,1,t.value,e),w(null)}),(e=>{if(w(n),s(t.catch,2,t.error,e),w(null),!t.hasCatch)throw e})),t.current!==t.pending)return s(t.pending,0),!0}else{if(t.current!==t.then)return s(t.then,1,t.value,e),!0;t.resolved=e}var l}function B(e,t,n){const s=e.$$.props[t];void 0!==s&&(e.$$.bound[s]=n,n(e.$$.ctx[s]))}function V(e){e&&e.c()}function G(e,n,i,o){const{fragment:c,on_mount:a,on_destroy:r,after_update:u}=e.$$;c&&c.m(n,i),o||L((()=>{const n=a.map(t).filter(l);r?r.push(...n):s(n),e.$$.on_mount=[]})),u.forEach(L)}function J(e,t){const n=e.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function X(e,t){-1===e.$$.dirty[0]&&(z.push(e),E||(E=!0,C.then(O)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function W(t,l,i,o,c,a,u=[-1]){const d=y;w(t);const f=t.$$={fragment:null,ctx:null,props:a,update:e,not_equal:c,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:n(),dirty:u,skip_bound:!1};let p=!1;if(f.ctx=i?i(t,l.props||{},((e,n,...s)=>{const l=s.length?s[0]:n;return f.ctx&&c(f.ctx[e],f.ctx[e]=l)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](l),p&&X(t,e)),n})):[],f.update(),p=!0,s(f.before_update),f.fragment=!!o&&o(f.ctx),l.target){if(l.hydrate){const e=function(e){return Array.from(e.childNodes)}(l.target);f.fragment&&f.fragment.l(e),e.forEach(r)}else f.fragment&&f.fragment.c();l.intro&&H(t.$$.fragment),G(t,l.target,l.anchor,l.customElement),O()}w(d)}class Q{$destroy(){J(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function Y(t){let n;return{c(){n=d("div"),n.innerHTML='<div class="header__logo svelte-fa509d"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 25.78" class="svelte-fa509d"><path d="M41.34 6.14a5.72 5.72 0 00-3.37-.97 5.54 5.54 0 00-3.33.97 4.9 4.9 0 00-1.07 1 1.58 1.58 0 00-1.58-1.59h-.18a.3.3 0 00-.3.31V24a.3.3 0 00.3.31h.42a1.61 1.61 0 001.61-1.61v-4.37a5.18 5.18 0 00.8.72 5.56 5.56 0 003.33 1 5.72 5.72 0 003.37-.96 6.59 6.59 0 002.17-2.65 8.96 8.96 0 00.76-3.79 8.85 8.85 0 00-.76-3.78 6.37 6.37 0 00-2.17-2.72zm0 9.15a4.11 4.11 0 01-1.37 1.89 3.6 3.6 0 01-2.3.69 3.63 3.63 0 01-3.69-2.58 8.39 8.39 0 01-.44-2.75 7.57 7.57 0 01.44-2.76 4.2 4.2 0 011.34-1.85 3.63 3.63 0 012.28-.66 3.96 3.96 0 012.37.69 4.3 4.3 0 011.38 1.9 7.32 7.32 0 01.44 2.68 7.45 7.45 0 01-.45 2.75z"></path><path d="M47.44 19.9h1.69a.3.3 0 00.31-.3V6.18a.3.3 0 00-.31-.3h-1.69a.3.3 0 00-.31.3V19.6a.3.3 0 00.31.3z"></path><path d="M81.31 15.38h1.7a.3.3 0 00.3-.31V6.26a.3.3 0 00-.3-.31h-1.7a.3.3 0 00-.3.31v8.8a.3.3 0 00.3.32z"></path><path d="M64.36 5.84h-1.97a.31.31 0 00-.27.14L58.4 11l-3.75-5.02a.44.44 0 00-.24-.14h-1.96a.31.31 0 00-.24.51l4.89 6.44-5 6.6a.32.32 0 00.25.52h1.96a.23.23 0 00.24-.14l3.85-5.2 3.86 5.23a.42.42 0 00.27.14h1.96a.31.31 0 00.24-.52l-4.99-6.6 4.89-6.44a.35.35 0 00-.27-.54z"></path><path d="M77.98 5.84h-1.96a.31.31 0 00-.28.14L72.03 11l-3.75-5.02a.44.44 0 00-.24-.14h-1.97a.31.31 0 00-.24.51l4.89 6.44-5.02 6.6a.32.32 0 00.24.52h1.96a.23.23 0 00.24-.14l3.85-5.2 3.86 5.2a.42.42 0 00.27.14h1.96a.31.31 0 00.24-.52l-4.99-6.6 4.89-6.44a.31.31 0 00-.24-.51z"></path><path d="M99.2 9.04a6.16 6.16 0 00-2.33-2.62 6.94 6.94 0 00-3.65-.96 6.68 6.68 0 00-3.58.93A6.26 6.26 0 0087.27 9a8.63 8.63 0 00-.83 3.9 8.58 8.58 0 00.83 3.84 6.4 6.4 0 002.34 2.62 7.37 7.37 0 007.22.03 6.16 6.16 0 002.34-2.61 8.63 8.63 0 00.83-3.89 8.05 8.05 0 00-.8-3.85zm-2.71 7.6a3.77 3.77 0 01-3.24 1.44 3.86 3.86 0 01-3.23-1.44 6.21 6.21 0 01-1.1-3.82 7.37 7.37 0 01.48-2.72 3.8 3.8 0 011.41-1.82 4.06 4.06 0 012.41-.66 3.84 3.84 0 013.23 1.41 6.1 6.1 0 011.07 3.79 5.92 5.92 0 01-1.03 3.82z"></path><path class="logoIcon svelte-fa509d" d="M81.31 19.77h1.7a.3.3 0 00.3-.31v-1.68a.3.3 0 00-.3-.31h-1.7a.3.3 0 00-.3.3v1.7a.3.3 0 00.3.3z"></path><path class="logoIcon svelte-fa509d" d="M13.18 25.78a13.48 13.48 0 01-6.75-1.82l-.68-.4v-3.4H2.27l-.41-.67A12.76 12.76 0 010 12.9 13.06 13.06 0 0113.18 0a13.06 13.06 0 0113.18 12.9 13.06 13.06 0 01-13.18 12.88zm-4.61-3.8a10.27 10.27 0 004.6 1.04A10.26 10.26 0 0023.54 12.9 10.23 10.23 0 0013.18 2.8 10.26 10.26 0 002.82 12.92a10.13 10.13 0 001.07 4.51h1.86v-4.5a7.37 7.37 0 017.43-7.28 7.37 7.37 0 017.43 7.27 7.37 7.37 0 01-7.43 7.27H8.57zm4.6-13.56a4.56 4.56 0 00-4.6 4.5v4.52h4.6a4.51 4.51 0 100-9.02z"></path></svg></div>',g(n,"class","header svelte-fa509d")},m(e,t){a(e,n,t)},p:e,i:e,o:e,d(e){e&&r(n)}}}class Z extends Q{constructor(e){super(),W(this,e,null,Y,i,{})}}function ee(e){return{username:"Username",password:"Passwort",signin:"Anmelden",signin_description:"Bitte melde dich in dein pixxio System an um Dateien auszuwählen.",signin_error:"Ungültiger Benutzer oder Passwort",cancel:"Abbrechen",select:"Auswählen",selected:"ausgewählt",please_select:"Format wählen",original:"Original",preview:"Vorschau"}[e]}function te(t){let n;return{c(){n=d("div"),n.innerHTML='<div class="svelte-2yi7ym"><svg xmlns="http://www.w3.org/2000/svg" id="pixxioIcon" viewBox="0 0 76.52 76.52" class="svelte-2yi7ym"><path stroke="black" stroke-width="5" d="M24.76 50.76v-13c0-7.17 5.94-13 13.25-13s13.25 5.83 13.25 13c0 7.18-5.94 13-13.25 13H26.27l-11.17.38s-3.34-8.2-3.34-12.88a26.51 26.51 0 0126.5-26.5 26.51 26.51 0 0126.5 26.5 26.51 26.51 0 01-26.5 26.5c-4.85 0-9.58-1.3-13.5-3.6z" fill="none" class="svelte-2yi7ym"></path></svg></div>',g(n,"id","pixxio-ta-loading"),g(n,"class","svelte-2yi7ym")},m(e,t){a(e,n,t)},p:e,i:e,o:e,d(e){e&&r(n)}}}class ne extends Q{constructor(e){super(),W(this,e,null,te,i,{})}}const se=[];function le(t,n=e){let s;const l=[];function o(e){if(i(t,e)&&(t=e,s)){const e=!se.length;for(let e=0;e<l.length;e+=1){const n=l[e];n[1](),se.push(n,t)}if(e){for(let e=0;e<se.length;e+=2)se[e][0](se[e+1]);se.length=0}}}return{set:o,update:function(e){o(e(t))},subscribe:function(i,c=e){const a=[i,c];return l.push(a),1===l.length&&(s=n(o)||e),i(t),()=>{const e=l.indexOf(a);-1!==e&&l.splice(e,1),0===l.length&&(s(),s=null)}}}}const ie=le(""),oe=le(""),ce=le(""),ae=le(""),re=le(""),ue=le("preview"),de=le(!1);function fe(t){let n,l,i,o,u,f,h;return{c(){n=d("div"),l=d("div"),i=d("input"),o=p(),u=d("label"),u.textContent="Search",g(i,"id","pixxio-search"),g(i,"type","text"),g(i,"placeholder"," "),g(i,"class","svelte-gmuv5t"),g(u,"for","pixxio-search"),g(u,"class","svelte-gmuv5t"),g(l,"class","field svelte-gmuv5t"),g(n,"class","searchField fields svelte-gmuv5t")},m(e,s){a(e,n,s),c(n,l),c(l,i),$(i,t[0]),c(l,o),c(l,u),f||(h=[m(i,"input",t[2]),m(i,"input",t[1])],f=!0)},p(e,[t]){1&t&&i.value!==e[0]&&$(i,e[0])},i:e,o:e,d(e){e&&r(n),f=!1,s(h)}}}function pe(e,t,n){let{value:s=""}=t,l=null;return e.$$set=e=>{"value"in e&&n(0,s=e.value)},[s,()=>{l&&clearTimeout(l),l=setTimeout((()=>{re.update((()=>s))}),200)},function(){s=this.value,n(0,s)}]}class he extends Q{constructor(e){super(),W(this,e,pe,fe,i,{value:0})}}class me{accessToken="";refreshToken="";domain="";appKey="";v1=!1;constructor(){ie.subscribe((e=>this.domain=e)),oe.subscribe((e=>this.appKey=e)),ce.subscribe((e=>this.refreshToken=e)),ae.subscribe((e=>this.accessToken=e)),de.subscribe((e=>this.v1=e))}get(e,t={},n=!0,s=null,l=!0,i=!0){return this.call("get",e,t,n,s,l,i)}post(e,t={},n=!0,s=null,l=!0,i=!0){return this.call("post",e,t,n,s,l,i)}put(e,t={},n=!0,s=null,l=!0,i=!0){return this.call("put",e,t,n,s,l,i)}delete(e,t={},n=!0,s=null,l=!0,i=!0){return this.call("delete",e,t,n,s,l,i)}callAccessToken(){return new Promise(((e,t)=>{let n={refreshToken:this.refreshToken,applicationKey:this.appKey};this.v1&&(n={refreshToken:this.refreshToken,apiKey:this.appKey}),this.post("/accessToken",n,!1).then((n=>{n.success?(this.accessToken=n.accessToken,ae.update((()=>n.accessToken)),e()):t()})).catch(t)}))}call(e,t,n={},s=!0,l=null,i=!0,o=!0){return new Promise(((c,a)=>{const r=(s,r)=>{const u=this.domain+(this.v1?"/cgi-bin/api/pixxio-api.pl/json":"/gobackend")+t;this.v1&&this.accessToken&&(s.accessToken=this.accessToken);let d=s;if(o){d=new URLSearchParams;for(const e of Object.keys(s)){let t=s[e];"object"==typeof t&&(t=JSON.stringify(t)),d.set(e,t)}d=d.toString()}r||(r={}),i&&(r["Content-Type"]="application/x-www-form-urlencoded"),l&&(r={...r,...l});let f={url:u,request:{method:"post",headers:r,body:d}};switch(e){case"get":f={url:u+"?"+d,request:{headers:r}};break;case"put":f={url:u,request:{method:"put",headers:r,body:d}};break;case"delete":f={url:u,request:{method:"delete",headers:r,body:d}}}fetch(f.url,f.request).then((e=>e.json())).then((s=>{if(!0===s.success||"true"===s.success)c(s);else switch(s.errorcode){case"2003":case"2006":case 15007:case 15008:this.callAccessToken().then((()=>{this.call(e,t,n).subscribe((e=>{c(e)}))}));break;case 5266:default:a(s.errormessage)}})).catch((e=>a()))};if(s){const e=this.accessToken;let t={};this.v1?n.accessToken=e:t={Authorization:"Key "+e},r(n,t)}else r(n)}))}}function ge(t){let n;return{c(){n=d("small"),n.textContent=`${ee("signin_error")}`,g(n,"class","error svelte-sim3ue")},m(e,t){a(e,n,t)},p:e,d(e){e&&r(n)}}}function ve(e){let t,n;return t=new ne({}),{c(){V(t.$$.fragment)},m(e,s){G(t,e,s),n=!0},i(e){n||(H(t.$$.fragment,e),n=!0)},o(e){I(t.$$.fragment,e),n=!1},d(e){J(t,e)}}}function $e(e){let t,n,i,o,u,h,v,x,b,y,w,k,_,T,z,F,S,P,C,E,L,A,N,U,O,q=ee("signin")+"",R=e[2]&&ge(),j=e[3]&&ve();return{c(){t=d("div"),n=d("h2"),n.textContent=`${ee("signin")}`,i=p(),o=d("p"),o.textContent=`${ee("signin_description")}`,u=p(),h=d("div"),v=d("input"),x=p(),b=d("label"),b.textContent=`${ee("username")}`,y=p(),w=d("div"),k=d("input"),_=p(),T=d("label"),T.textContent=`${ee("password")}`,z=p(),R&&R.c(),F=p(),S=d("div"),P=d("button"),P.textContent=`${ee("cancel")}`,C=p(),E=d("button"),L=f(q),A=p(),j&&j.c(),g(n,"class","svelte-sim3ue"),g(o,"class","svelte-sim3ue"),g(v,"id","pixxio-username"),v.disabled=e[3],g(v,"type","text"),g(v,"placeholder"," "),g(v,"class","svelte-sim3ue"),g(b,"for","pixxio-username"),g(b,"class","svelte-sim3ue"),g(h,"class","field svelte-sim3ue"),g(k,"id","pixxio-password"),k.disabled=e[3],g(k,"type","password"),g(k,"placeholder"," "),g(k,"class","svelte-sim3ue"),g(T,"for","pixxio-password"),g(T,"class","svelte-sim3ue"),g(w,"class","field svelte-sim3ue"),g(P,"class","button button--secondary svelte-sim3ue"),g(E,"class","button svelte-sim3ue"),g(E,"type","submit"),E.disabled=e[3],g(S,"class","buttonGroup svelte-sim3ue"),g(t,"class","login fields svelte-sim3ue")},m(s,r){a(s,t,r),c(t,n),c(t,i),c(t,o),c(t,u),c(t,h),c(h,v),$(v,e[0]),c(h,x),c(h,b),c(t,y),c(t,w),c(w,k),$(k,e[1]),c(w,_),c(w,T),c(t,z),R&&R.m(t,null),c(t,F),c(t,S),c(S,P),c(S,C),c(S,E),c(E,L),c(t,A),j&&j.m(t,null),N=!0,U||(O=[m(v,"input",e[11]),m(k,"input",e[12]),m(P,"click",e[7]),m(E,"click",(function(){l(e[4]?e[6]:e[5])&&(e[4]?e[6]:e[5]).apply(this,arguments)}))],U=!0)},p(n,[s]){e=n,(!N||8&s)&&(v.disabled=e[3]),1&s&&v.value!==e[0]&&$(v,e[0]),(!N||8&s)&&(k.disabled=e[3]),2&s&&k.value!==e[1]&&$(k,e[1]),e[2]?R?R.p(e,s):(R=ge(),R.c(),R.m(t,F)):R&&(R.d(1),R=null),(!N||8&s)&&(E.disabled=e[3]),e[3]?j?8&s&&H(j,1):(j=ve(),j.c(),H(j,1),j.m(t,null)):j&&(M(),I(j,1,1,(()=>{j=null})),K())},i(e){N||(H(j),N=!0)},o(e){I(j),N=!1},d(e){e&&r(t),R&&R.d(),j&&j.d(),U=!1,s(O)}}}function xe(e,t,n){let s,l,i,c,a,r;o(e,ie,(e=>n(8,c=e))),o(e,oe,(e=>n(9,a=e))),o(e,de,(e=>n(10,r=e)));const u=T(),d=new me;let f="",p="",h=!1,m=!1;const g=sessionStorage.getItem("refreshToken");g&&(m=!0,ce.update((()=>g)),d.callAccessToken().then((()=>{n(3,m=!1),u("authenticated")})).catch((e=>{ce.update((()=>"")),n(3,m=!1)})));return e.$$.update=()=>{256&e.$$.dirty&&(s=c),512&e.$$.dirty&&(l=a),1024&e.$$.dirty&&n(4,i=r)},[f,p,h,m,i,async()=>{n(3,m=!0),n(2,h=!1);try{const e=new FormData;e.set("applicationKey",l),e.set("userNameOrEmail",f),e.set("password",p);const t=await fetch(`${s}/gobackend/login`,{method:"POST",body:e}),i=await t.json();if(n(3,m=!1),!i.success)throw n(2,h=!0),new Error;ce.update((()=>i.refreshToken)),sessionStorage.setItem("refreshToken",i.refreshToken),d.callAccessToken().then((()=>{u("authenticated")}))}catch(e){n(3,m=!1),n(2,h=!0)}},async()=>{n(3,m=!0),n(2,h=!1);try{const e=new FormData;e.set("apiKey",l),e.set("options",JSON.stringify({username:f,password:p}));const t={apiKey:l,options:{username:f,password:p}};let i=new URLSearchParams;for(const e of Object.keys(t)){let n=t[e];"object"==typeof n&&(n=JSON.stringify(n)),i.set(e,n)}i=i.toString();const o=await fetch(`${s}/cgi-bin/api/pixxio-api.pl/json/login`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:i}),c=await o.json();if(n(3,m=!1),"true"!==c.success)throw n(2,h=!0),new Error;ce.update((()=>c.refreshToken)),sessionStorage.setItem("refreshToken",c.refreshToken),d.callAccessToken().then((()=>{u("authenticated")}))}catch(e){n(3,m=!1),n(2,h=!0)}},()=>{u("cancel")},c,a,r,function(){f=this.value,n(0,f)},function(){p=this.value,n(1,p)}]}class be extends Q{constructor(e){super(),W(this,e,xe,$e,i,{})}}function ye(e,t,n){const s=e.slice();return s[9]=t[n],s}function we(e){let t,n,s,l=e[9].name+"";return{c(){t=d("option"),n=f(l),t.__value=s=e[9].id,t.value=t.__value},m(e,s){a(e,t,s),c(t,n)},p(e,i){2&i&&l!==(l=e[9].name+"")&&v(n,l),2&i&&s!==(s=e[9].id)&&(t.__value=s,t.value=t.__value)},d(e){e&&r(t)}}}function ke(t){let n,l,i,o,f,v,$,b,y,w=function(t){let n;return{c(){n=d("option"),n.textContent=`${ee("preview")}`,n.__value="preview",n.value=n.__value},m(e,t){a(e,n,t)},p:e,d(e){e&&r(n)}}}(),k=function(t){let n;return{c(){n=d("option"),n.textContent=`${ee("original")}`,n.__value="original",n.value=n.__value},m(e,t){a(e,n,t)},p:e,d(e){e&&r(n)}}}(),_=t[1],T=[];for(let e=0;e<_.length;e+=1)T[e]=we(ye(t,_,e));return{c(){n=d("div"),l=d("div"),i=d("select"),w&&w.c(),o=h(),k&&k.c(),f=h();for(let e=0;e<T.length;e+=1)T[e].c();v=p(),$=d("label"),$.textContent=`${ee("please_select")}`,g(i,"name",""),g(i,"id","pixxioDownloadFormats__dropdown"),g(i,"placeholder"," "),g(i,"class","svelte-1x1v299"),void 0===t[0]&&L((()=>t[3].call(i))),g($,"for","pixxioDownloadFormats__dropdown"),g($,"class","svelte-1x1v299"),g(l,"class","field svelte-1x1v299"),g(n,"class","downloadFormats fields svelte-1x1v299")},m(e,s){a(e,n,s),c(n,l),c(l,i),w&&w.m(i,null),c(i,o),k&&k.m(i,null),c(i,f);for(let e=0;e<T.length;e+=1)T[e].m(i,null);x(i,t[0]),c(l,v),c(l,$),b||(y=[m(i,"change",t[3]),m(i,"change",t[2])],b=!0)},p(e,[t]){if(w.p(e,t),k.p(e,t),2&t){let n;for(_=e[1],n=0;n<_.length;n+=1){const s=ye(e,_,n);T[n]?T[n].p(s,t):(T[n]=we(s),T[n].c(),T[n].m(i,null))}for(;n<T.length;n+=1)T[n].d(1);T.length=_.length}3&t&&x(i,e[0])},i:e,o:e,d(e){e&&r(n),w&&w.d(),k&&k.d(),u(T,e),b=!1,s(y)}}}function _e(e,t,n){let s;T(),new me;let l=[];_((()=>{i()}));const i=()=>{ue.update((()=>s))};return[s,l,i,function(){s=function(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}(this),n(0,s),n(1,l)}]}class Te extends Q{constructor(e){super(),W(this,e,_e,ke,i,{})}}function ze(e,t,n){const s=e.slice();return s[3]=t[n],s}function Fe(e){let t,n,s,i,o,u;return{c(){t=d("li"),n=d("img"),g(n,"loading","lazy"),n.src!==(s=e[3].imagePath||e[3].modifiedPreviewFileURLs[0])&&g(n,"src",s),g(n,"alt",i=e[3].fileName),g(n,"class","svelte-2dn8sz"),g(t,"class","pixxioSelection__file svelte-2dn8sz")},m(s,i){a(s,t,i),c(t,n),o||(u=m(t,"click",(function(){l(e[2]("deselect",e[3]))&&e[2]("deselect",e[3]).apply(this,arguments)})),o=!0)},p(t,l){e=t,2&l&&n.src!==(s=e[3].imagePath||e[3].modifiedPreviewFileURLs[0])&&g(n,"src",s),2&l&&i!==(i=e[3].fileName)&&g(n,"alt",i)},d(e){e&&r(t),o=!1,u()}}}function Se(e){let t,n,s,l=e[0].length-e[1].length+"";return{c(){t=d("li"),n=f("+ "),s=f(l),g(t,"class","svelte-2dn8sz")},m(e,l){a(e,t,l),c(t,n),c(t,s)},p(e,t){3&t&&l!==(l=e[0].length-e[1].length+"")&&v(s,l)},d(e){e&&r(t)}}}function Pe(t){let n,s,l=t[1],i=[];for(let e=0;e<l.length;e+=1)i[e]=Fe(ze(t,l,e));let o=t[0].length>3&&Se(t);return{c(){n=d("ul");for(let e=0;e<i.length;e+=1)i[e].c();s=p(),o&&o.c(),g(n,"class","svelte-2dn8sz")},m(e,t){a(e,n,t);for(let e=0;e<i.length;e+=1)i[e].m(n,null);c(n,s),o&&o.m(n,null)},p(e,[t]){if(6&t){let o;for(l=e[1],o=0;o<l.length;o+=1){const c=ze(e,l,o);i[o]?i[o].p(c,t):(i[o]=Fe(c),i[o].c(),i[o].m(n,s))}for(;o<i.length;o+=1)i[o].d(1);i.length=l.length}e[0].length>3?o?o.p(e,t):(o=Se(e),o.c(),o.m(n,null)):o&&(o.d(1),o=null)},i:e,o:e,d(e){e&&r(n),u(i,e),o&&o.d()}}}function Ce(e,t,n){let s;const l=T();let{selectedFiles:i=[]}=t;return e.$$set=e=>{"selectedFiles"in e&&n(0,i=e.selectedFiles)},e.$$.update=()=>{1&e.$$.dirty&&n(1,s=i.slice(0,3))},[i,s,l]}class Ee extends Q{constructor(e){super(),W(this,e,Ce,Pe,i,{selectedFiles:0})}}function Le(e){let t,n,s,l,i,o,u,h,$,x,y,w=e[0].fileName+"";return{c(){t=d("li"),n=d("figure"),s=d("div"),l=d("img"),u=p(),h=d("figcaption"),$=f(w),g(l,"loading","lazy"),l.src!==(i=e[0].imagePath||e[0].modifiedPreviewFileURLs[0])&&g(l,"src",i),g(l,"alt",o=e[0].fileName),g(l,"class","svelte-e9o60a"),g(s,"class","pixxioSquare svelte-e9o60a"),b(s,"pixxioSquare--active",e[0].selected),g(h,"class","svelte-e9o60a"),g(n,"class","svelte-e9o60a"),g(t,"class","svelte-e9o60a")},m(i,o){a(i,t,o),c(t,n),c(n,s),c(s,l),c(n,u),c(n,h),c(h,$),x||(y=m(t,"click",e[3]),x=!0)},p(e,t){1&t&&l.src!==(i=e[0].imagePath||e[0].modifiedPreviewFileURLs[0])&&g(l,"src",i),1&t&&o!==(o=e[0].fileName)&&g(l,"alt",o),1&t&&b(s,"pixxioSquare--active",e[0].selected),1&t&&w!==(w=e[0].fileName+"")&&v($,w)},d(e){e&&r(t),x=!1,y()}}}function Ae(t){let n,s=t[0]&&Le(t);return{c(){s&&s.c(),n=h()},m(e,t){s&&s.m(e,t),a(e,n,t)},p(e,[t]){e[0]?s?s.p(e,t):(s=Le(e),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},i:e,o:e,d(e){s&&s.d(e),e&&r(n)}}}function Ne(e,t,n){let{file:s=null}=t,{selected:l=!1}=t;const i=T(),o=()=>{i(l?"deselect":"select",s)};return e.$$set=e=>{"file"in e&&n(0,s=e.file),"selected"in e&&n(2,l=e.selected)},[s,o,l,()=>o()]}class Ue extends Q{constructor(e){super(),W(this,e,Ne,Ae,i,{file:0,selected:2})}}function Oe(e,t,n){const s=e.slice();return s[29]=t[n],s[30]=t,s[31]=n,s}function qe(t){let n;return{c(){n=f("error")},m(e,t){a(e,n,t)},p:e,i:e,o:e,d(e){e&&r(n)}}}function Re(e){let t,n,l,i,o,h,$,x,y,w,k,_,T,z,S,P,C,E,L,N,U,O,q,R,j,D,X,W,Q=e[0]?"/"+e[0]:"",Y=ee("selected")+"",Z=ee("select")+"",te=e[4],ne=[];for(let t=0;t<te.length;t+=1)ne[t]=je(Oe(e,te,t));const se=e=>I(ne[e],1,1,(()=>{ne[e]=null}));function le(t){e[17](t)}o=new Te({});let ie={};return void 0!==e[1]&&(ie.selectedFiles=e[1]),P=new Ee({props:ie}),F.push((()=>B(P,"selectedFiles",le))),P.$on("deselect",e[10]),{c(){t=d("section"),n=d("ul");for(let e=0;e<ne.length;e+=1)ne[e].c();var s,c,a;l=p(),i=d("div"),V(o.$$.fragment),h=p(),$=d("div"),x=d("p"),y=d("strong"),w=f(e[2]),k=p(),_=f(Q),T=p(),z=f(Y),S=p(),V(P.$$.fragment),E=p(),L=d("span"),N=p(),U=d("button"),U.textContent=`${ee("cancel")}`,O=p(),q=d("button"),R=f(Z),g(n,"class","svelte-1z0y19a"),g(t,"id","pixxioFiles__container"),g(t,"class","svelte-1z0y19a"),b(t,"pixxioFiles__container--maxReached",e[5]),g(i,"class","pixxioFormats svelte-1z0y19a"),s="flex-grow",c="1",L.style.setProperty(s,c,a?"important":""),g(U,"class","button button--secondary svelte-1z0y19a"),g(q,"class","button svelte-1z0y19a"),g(q,"type","submit"),q.disabled=j=!e[6],g($,"class","buttonGroup buttonGroup--right svelte-1z0y19a")},m(s,r){a(s,t,r),c(t,n);for(let e=0;e<ne.length;e+=1)ne[e].m(n,null);a(s,l,r),a(s,i,r),G(o,i,null),a(s,h,r),a(s,$,r),c($,x),c(x,y),c(y,w),c(x,k),c(x,_),c(x,T),c(x,z),c($,S),G(P,$,null),c($,E),c($,L),c($,N),c($,U),c($,O),c($,q),c(q,R),D=!0,X||(W=[m(t,"scroll",e[8]),m(U,"click",e[18]),m(q,"click",e[11])],X=!0)},p(e,s){if(1552&s[0]){let t;for(te=e[4],t=0;t<te.length;t+=1){const l=Oe(e,te,t);ne[t]?(ne[t].p(l,s),H(ne[t],1)):(ne[t]=je(l),ne[t].c(),H(ne[t],1),ne[t].m(n,null))}for(M(),t=te.length;t<ne.length;t+=1)se(t);K()}32&s[0]&&b(t,"pixxioFiles__container--maxReached",e[5]),(!D||4&s[0])&&v(w,e[2]),(!D||1&s[0])&&Q!==(Q=e[0]?"/"+e[0]:"")&&v(_,Q);const l={};!C&&2&s[0]&&(C=!0,l.selectedFiles=e[1],A((()=>C=!1))),P.$set(l),(!D||64&s[0]&&j!==(j=!e[6]))&&(q.disabled=j)},i(e){if(!D){for(let e=0;e<te.length;e+=1)H(ne[e]);H(o.$$.fragment,e),H(P.$$.fragment,e),D=!0}},o(e){ne=ne.filter(Boolean);for(let e=0;e<ne.length;e+=1)I(ne[e]);I(o.$$.fragment,e),I(P.$$.fragment,e),D=!1},d(e){e&&r(t),u(ne,e),e&&r(l),e&&r(i),J(o),e&&r(h),e&&r($),J(P),X=!1,s(W)}}}function je(e){let t,n,s,l;function i(t){e[15](t,e[29],e[30],e[31])}function o(t){e[16](t,e[29])}let c={};return void 0!==e[29]&&(c.file=e[29]),void 0!==e[29].selected&&(c.selected=e[29].selected),t=new Ue({props:c}),F.push((()=>B(t,"file",i))),F.push((()=>B(t,"selected",o))),t.$on("select",e[9]),t.$on("deselect",e[10]),{c(){V(t.$$.fragment)},m(e,n){G(t,e,n),l=!0},p(l,i){e=l;const o={};!n&&16&i[0]&&(n=!0,o.file=e[29],A((()=>n=!1))),!s&&16&i[0]&&(s=!0,o.selected=e[29].selected,A((()=>s=!1))),t.$set(o)},i(e){l||(H(t.$$.fragment,e),l=!0)},o(e){I(t.$$.fragment,e),l=!1},d(e){J(t,e)}}}function Me(t){let n,s;return n=new ne({}),{c(){V(n.$$.fragment)},m(e,t){G(n,e,t),s=!0},p:e,i(e){s||(H(n.$$.fragment,e),s=!0)},o(e){I(n.$$.fragment,e),s=!1},d(e){J(n,e)}}}function Ke(e){let t,n,s,l={ctx:e,current:null,token:null,hasCatch:!0,pending:Me,then:Re,catch:qe,blocks:[,,,]};return D(n=e[3],l),{c(){t=d("div"),l.block.c(),g(t,"class","pixxioFiles svelte-1z0y19a")},m(e,n){a(e,t,n),l.block.m(t,l.anchor=null),l.mount=()=>t,l.anchor=null,s=!0},p(t,s){if(e=t,l.ctx=e,8&s[0]&&n!==(n=e[3])&&D(n,l));else{const t=e.slice();l.block.p(t,s)}},i(e){s||(H(l.block),s=!0)},o(e){for(let e=0;e<3;e+=1){I(l.blocks[e])}s=!1},d(e){e&&r(t),l.block.d(),l.token=null,l=null}}}function He(e,t,n){let s,l,i,c,a,r,u;o(e,ue,(e=>n(13,r=e))),o(e,de,(e=>n(14,u=e)));const d=T(),f=new me;let{max:p=0}=t,h=null,m=1,g=[],v=0,$=!1,x="",b=[];_((()=>{n(3,h=a?y():w()),re.subscribe((e=>{x=e,a?y():w()}))}));const y=async e=>{try{$=!0;const t={pagination:"50-"+m,...x?{searchTerm:x}:{}},s=await f.get("/files",{options:t});if("true"!==s.success)throw new Error(s.errormessage);s.files=s.files.map((e=>(e.selected=b.find((t=>t.id===e.id)),e))),e?n(4,g=[...g,...s.files]):(n(4,g=s.files),v=s.quantity),$=!1}catch(e){$=!1}},w=async e=>{try{$=!0;const t={page:m,pageSize:50,responseFields:["id","modifiedPreviewFileURLs","previewFileURL","originalFileURL","width","height","fileName","fileExtension","uploadDate","modifyDate","rating","userID","fileSize","dominantColor"],previewFileOptions:[{height:400,quality:60}],...x?{filter:{filterType:"searchTerm",term:x}}:{}},s=await f.get("/files",t);if(!s.success)throw new Error(s.errormessage);s.files=s.files.map((e=>(e.selected=b.find((t=>t.id===e.id)),e))),e?n(4,g=[...g,...s.files]):(n(4,g=s.files),v=s.quantity),$=!1}catch(e){$=!1}},k=()=>{g.forEach((e=>{e.selected=!1})),n(4,g),b.forEach((e=>{g.find((t=>t.id==e.id)).selected=!0,n(4,g)}))};return e.$$set=e=>{"max"in e&&n(0,p=e.max)},e.$$.update=()=>{2&e.$$.dirty[0]&&n(2,s=b.length),5&e.$$.dirty[0]&&n(5,l=s>=p&&p),8192&e.$$.dirty[0]&&n(12,c=r),4100&e.$$.dirty[0]&&n(6,i=s>=1&&c),16384&e.$$.dirty[0]&&(a=u)},[p,b,s,h,g,l,i,d,e=>{if($||g.length>=v)return;e.target.scrollHeight-e.target.scrollTop-e.target.offsetHeight<e.target.offsetHeight/2&&(m+=1,a?y(!0):w(!0))},e=>{g.find((t=>t.id===e.detail.id)).selected=!0,n(4,g),n(1,b=[e.detail,...b.slice(0,p-1)]),k()},e=>{n(1,b=b.filter((t=>t.id!==e.detail.id))),k()},async()=>{d("submit",b.map((e=>{let t="",n="";return a?(t="preview"===c?e.imagePath:e.originalPath,n=e.imagePath):(t="preview"===c?e.previewFileURL:e.originalFileURL,n=e.modifiedPreviewFileURLs[0]),{url:t,thumbnail:n}})))},c,r,u,function(e,t,s,l){s[l]=e,n(4,g)},function(t,s){e.$$.not_equal(s.selected,t)&&(s.selected=t,n(4,g))},function(e){b=e,n(1,b)},()=>d("cancel")]}class Ie extends Q{constructor(e){super(),W(this,e,He,Ke,i,{max:0},[-1,-1])}}function De(e){let t,n,s,l,i,o,u,f,h=e[1]&&Be(),m=e[3]&&Ve(e);const v=[Je,Ge],$=[];function x(e,t){return e[3]?1:0}return o=x(e),u=$[o]=v[o](e),{c(){t=d("main"),n=d("div"),s=d("header"),h&&h.c(),l=p(),m&&m.c(),i=p(),u.c(),g(s,"class","svelte-1c8ayef"),g(n,"class","container svelte-1c8ayef"),b(n,"container--enlarge",e[5]),g(t,"class","svelte-1c8ayef")},m(e,r){a(e,t,r),c(t,n),c(n,s),h&&h.m(s,null),c(s,l),m&&m.m(s,null),c(n,i),$[o].m(n,null),f=!0},p(e,t){e[1]?h?2&t&&H(h,1):(h=Be(),h.c(),H(h,1),h.m(s,l)):h&&(M(),I(h,1,1,(()=>{h=null})),K()),e[3]?m?(m.p(e,t),8&t&&H(m,1)):(m=Ve(e),m.c(),H(m,1),m.m(s,null)):m&&(M(),I(m,1,1,(()=>{m=null})),K());let i=o;o=x(e),o===i?$[o].p(e,t):(M(),I($[i],1,1,(()=>{$[i]=null})),K(),u=$[o],u?u.p(e,t):(u=$[o]=v[o](e),u.c()),H(u,1),u.m(n,null)),32&t&&b(n,"container--enlarge",e[5])},i(e){f||(H(h),H(m),H(u),f=!0)},o(e){I(h),I(m),I(u),f=!1},d(e){e&&r(t),h&&h.d(),m&&m.d(),$[o].d()}}}function Be(e){let t,n;return t=new Z({}),{c(){V(t.$$.fragment)},m(e,s){G(t,e,s),n=!0},i(e){n||(H(t.$$.fragment,e),n=!0)},o(e){I(t.$$.fragment,e),n=!1},d(e){J(t,e)}}}function Ve(e){let t,n,s;function l(t){e[10](t)}let i={};return void 0!==e[4]&&(i.value=e[4]),t=new he({props:i}),F.push((()=>B(t,"value",l))),{c(){V(t.$$.fragment)},m(e,n){G(t,e,n),s=!0},p(e,s){const l={};!n&&16&s&&(n=!0,l.value=e[4],A((()=>n=!1))),t.$set(l)},i(e){s||(H(t.$$.fragment,e),s=!0)},o(e){I(t.$$.fragment,e),s=!1},d(e){J(t,e)}}}function Ge(e){let t,n,s,l;function i(t){e[11](t)}let o={};return void 0!==e[0]&&(o.max=e[0]),n=new Ie({props:o}),F.push((()=>B(n,"max",i))),n.$on("cancel",e[7]),n.$on("submit",e[8]),{c(){t=d("section"),V(n.$$.fragment)},m(e,s){a(e,t,s),G(n,t,null),l=!0},p(e,t){const l={};!s&&1&t&&(s=!0,l.max=e[0],A((()=>s=!1))),n.$set(l)},i(e){l||(H(n.$$.fragment,e),l=!0)},o(e){I(n.$$.fragment,e),l=!1},d(e){e&&r(t),J(n)}}}function Je(t){let n,s,l;return s=new be({}),s.$on("cancel",t[7]),s.$on("authenticated",t[6]),{c(){n=d("section"),V(s.$$.fragment)},m(e,t){a(e,n,t),G(s,n,null),l=!0},p:e,i(e){l||(H(s.$$.fragment,e),l=!0)},o(e){I(s.$$.fragment,e),l=!1},d(e){e&&r(n),J(s)}}}function Xe(e){let t,n,s,l,i,o=e[2]&&De(e);return{c(){o&&o.c(),t=p(),n=d("link"),s=d("link"),l=d("style"),l.textContent="/* Global CSS via SASS */\n#pixxio-integration {\n  font-family: 'Heebo', Arial, Helvetica, sans-serif;\n  font-size: 16px;\n  all: initial; }",g(n,"rel","preconnect"),g(n,"href","https://fonts.gstatic.com"),g(n,"crossorigin",""),g(s,"href","https://fonts.googleapis.com/css2?family=Heebo:wght@400;700&family=Work+Sans:wght@400;500&display=swap"),g(s,"rel","stylesheet"),g(l,"lang","scss")},m(e,r){o&&o.m(e,r),a(e,t,r),c(document.head,n),c(document.head,s),c(document.head,l),i=!0},p(e,[n]){e[2]?o?(o.p(e,n),4&n&&H(o,1)):(o=De(e),o.c(),H(o,1),o.m(t.parentNode,t)):o&&(M(),I(o,1,1,(()=>{o=null})),K())},i(e){i||(H(o),i=!0)},o(e){I(o),i=!1},d(e){o&&o.d(e),e&&r(t),r(n),r(s),r(l)}}}function We(e,t,n){let s,{standalone:l=!1}=t,{config:i={appUrl:"",appKey:"",v1:!1}}=t,{show:o=!1}=t,{max:c=0}=t;const a=T();_((async()=>{ie.update((()=>i.appUrl)),oe.update((()=>i.appKey)),de.update((()=>i.v1||!1))}));let r=!1,u="";return e.$$set=e=>{"standalone"in e&&n(1,l=e.standalone),"config"in e&&n(9,i=e.config),"show"in e&&n(2,o=e.show),"max"in e&&n(0,c=e.max)},e.$$.update=()=>{8&e.$$.dirty&&n(5,s=r)},[c,l,o,r,u,s,()=>{n(3,r=!0)},()=>{a("cancel")},({detail:e})=>{a("submit",e)},i,function(e){u=e,n(4,u)},function(e){c=e,n(0,c)}]}class Qe extends Q{constructor(e){super(),W(this,e,We,Xe,i,{standalone:1,config:9,show:2,max:0})}}class Ye{constructor(e={},t="en"){this.config=e,this.boot(),this.app=new Qe({target:this.element,props:{standalone:!0,config:e}})}boot(){if(this.config.element)this.element=this.config.element;else{const e=document.createElement("div");e.id="pixxio-integration",document.body.appendChild(e),this.element=e}}getMedia(e){return new Promise(((t,n)=>{e.max&&this.app.$set({max:e.max}),this.app.$set({show:!0}),this.app.$on("submit",(e=>{this.app.$set({show:!1}),t(e.detail)})),this.app.$on("cancel",(()=>{this.app.$set({show:!1}),n()}))}))}}window.PIXXIO=Ye;export default Ye;
